{"version":3,"sources":["assets/images/home-banner.jpg","assets/images/home-avatar.jpeg","components/design-system.js","home.js","components/line-clamper.js","components/widget.js","helpers.js","components/fate-die.js","components/fate-dice.js","components/fate-dice-roller.js","components/fate-character-sheet.js","components/fate-manager.js","fate-project.js","epic-cafe-manager.js","index.js"],"names":["module","exports","theme","primary","textOverPrimary","secondary","textOverSecondary","fontFamily","layoutInitialMarginDirection","layout","StyledBox","styled","Paper","props","compact","separation","StyledButton","button","background","color","border","darken","transparentize","defaultProps","div","RESPONSIVE_SIZES","RESPONSIVE_SIZES_PRIORITIES","memoizedRulesCreators","createResponsiveRule","size","condition","createResponsiveMediaCondition","strings","values","reduce","acc","aString","i","length","join","component","cellPropsRegex","cellRules","Object","keys","prop","exec","width","cssRule","push","ruleOrder","sort","a","b","some","x","map","Home","href","valueFormatRegex","StyledToggleButton","lineHeight","value","unit","StyledWrapper","isExpanded","StyledContainer","maxLines","StyledLineClamper","state","showExpansionToggle","_contentRef","React","createRef","_refreshExpansionToggleState","currentValue","contentElRect","current","getBoundingClientRect","bottom","top","setState","_handleExpansionToggle","prevState","componentDidUpdate","nextProps","computedStyle","window","getComputedStyle","this","matches","getPropertyValue","addEventListener","removeEventListener","children","renderExpansionElement","ref","Component","onExpansionToggle","onClick","footerHeaderStyles","StyledHeader","header","StyledContent","StyledFooter","footer","StyledCommand","Widget","title","commands","wrapperProps","onInvoke","key","otherProps","modifyArrayElement","array","index","getNewElement","currentElement","slice","StyledDice","span","Math","max","floor","FateDie","propsValue","min","isNaN","Number","getDiceValue","icon","faMinusSquare","faPlusSquare","faSquare","hoveringKeyFrames","keyframes","StyledSelectableFateDie","css","selected","lighten","clickedKeyFrames","StyledSelectionChangedFateDice","FateDice","selectionChangedIndex","_memoizedHandlers","_onSelectionChange","handler","args","setTimeout","_getMemoizedHandler","dice","onDieSelect","StyledBoard","StyledText","DEFAULT_SIZE","DiceRollerWidget","selectedSkill","rollId","rerollCount","onSelectedDiceReroll","onRoll","onClear","diceValue","finalValue","someSelectedDice","name","concat","Fragment","FateDiceRoller","rollCount","selectedSkillIndex","_handleRoll","e","Array","from","getRandomDieValue","_handleSelectedDiceReroll","_handleClear","_handleDieSelect","Helpers","currentDie","_handleSelectedSkillIndexChange","currentSelectedSkillIndex","currentTarget","skills","checked","type","onChange","random","HiddenStyledBox","StyledFieldSet","FateCharacterSheet","id","description","aspects","highConcept","problem","others","y","j","stunts","extras","stressTracks","physical","mental","consequences","defaultValues","_handleNameChange","ev","_handleSkillNameChange","curElement","_handleSubmit","event","onSubmit","preventDefault","filter","groupedSkills","skill","placeholder","item","StyledOptions","ul","Item","li","Button","FateCharacterManager","selectionMethod","existingCharacters","localStorage","strMyCharacters","getItem","JSON","parse","removeItem","_handleNewClick","_handleExistingClick","_handleSelectionReset","_handleNewCharacterSubmit","newCharacter","newCharacterName","alert","setItem","stringify","disabled","character","FateManager","selectedCharacter","_handleCharacterSubmit","_handleCharacterChangeRequest","StyledList","FateProject","strSkills","_canSetState","fetch","then","response","text","DOMParser","parseFromString","doc","elFateCoreSkillTable","querySelector","Error","strFateCoreSkillTable","innerHTML","catch","console","error","EpicCafeManager","Typography","variant","EpicBggMatcherContainer","withAuth","auth","useState","catalog","mustFetch","refetchCatalog","fetchWithAuth","url","options","getAccessToken","token","headers","Authorization","useEffect","json","jsonData","epicCatalog","bggCatalog","epicBggJoin","players","age","coordinates","bggMatchId","foundBggMatches","matchId","log","processedCatalog","setCatalog","EpicBggMatcher","games","onEpicBggMatchConfirm","method","body","res","status","statusText","onEpicBggMatchesClean","onEpicBggMatchAdd","MATCHES_FILTERS","CONFIRMED_FILTERS","FILTERS","matchesFilter","confirmedFilter","StyledGrid","Grid","page","appliedMatchesFilterIndex","appliedConfirmedFilterIndex","setPage","appliedFilter","useMemo","filteredGames","displayedGames","filteredGamesCount","container","md","Toolbar","Select","native","setAppliedMatchedFilterIndex","setAppliedConfirmedFilterIndex","xs","TablePagination","count","rowsPerPage","rowsPerPageOptions","onChangePage","newPage","IconButton","open","faEye","BggMatchSelector","currentMatch","onMatchConfirm","onMatchesClean","onMatchAdd","StyledSelect","setSelected","yearpublished","faSmile","faSadTear","newBggMatchId","prompt","faPlus","config","issuer","redirectUri","location","origin","clientId","pkce","isApiAllowed","hostname","appTheme","StyledAppBar","AppBar","StyledAppBarTabs","Tabs","StyledTopBanner","textColor","StyledAvatar","Avatar","LoginButton","isAuthenticated","onLogin","onLogout","AppContent","authenticated","setAuthenticated","confirmation","CssBaseline","position","path","match","history","params","subPath","newValue","Tab","label","login","logout","exact","render","homeBannerImage","gutterBottom","src","homeAvatarImage","Container","pathname","rootElement","document","getElementById","ReactDOM","basename","ImplicitCallback"],"mappings":"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","file":"static/js/main.e95f4474.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/home-banner.562d3555.jpg\";","module.exports = __webpack_public_path__ + \"static/media/home-avatar.6bd34b32.jpeg\";","import styled from \"styled-components\";\nimport { Paper } from \"@material-ui/core\";\nimport { darken, transparentize } from \"polished\";\n\nexport const theme = {\n  primary: \"blue\",\n  textOverPrimary: \"white\",\n  secondary: \"violet\",\n  textOverSecondary: \"white\",\n  fontFamily: \"'Roboto', sans-serif\"\n};\n\nconst layoutInitialMarginDirection = layout =>\n  layout === \"column\" ? \"top\" : \"left\";\nexport const layoutPropsStyles = ({ layout = \"column\", separation = 8 }) =>\n  layout\n    ? `\n  display: flex;\n  flex-direction: ${layout};\n  > *:first-child {\n    margin-${layoutInitialMarginDirection(layout)}: 0;\n  }\n  ${\n    separation\n      ? `\n  > *:not(:first-child) {\n    margin-${layoutInitialMarginDirection(layout)}: ${separation}px;\n  `\n      : \"\"\n  }}\n`\n    : \"\";\n\nexport const StyledBox = styled(Paper)`\n  padding: ${props => (props.compact ? 8 : 16)}px;\n  ${layoutPropsStyles}\n`;\n\nexport const StyledButton = styled.button`\n  cursor: pointer;\n  ${({ primary, secondary, theme }) => {\n    const [background, color, border] = primary\n      ? [theme.primary, theme.textOverPrimary, \"\"]\n      : secondary\n      ? [theme.secondary, theme.textOverSecondary, \"\"]\n      : [\"\", theme.primary, theme.primary];\n\n    return `\n  background-color: ${background || \"transparent\"};\n  color: ${color};\n  border: ${border ? `2px solid ${border}` : \"0\"};\n  :hover, :focus {\n    ${background ? `background-color: ${darken(0.2, background)};` : \"\"}\n    ${color ? `color: ${darken(0.2, color)};` : \"\"}\n    ${border ? `border-color: ${darken(0.2, border)};` : \"\"}\n  }\n  :disabled {\n    cursor: not-allowed;\n    ${background ? `background-color: ${transparentize(0.3, background)};` : \"\"}\n    ${color ? `color: ${transparentize(0.3, color)};` : \"\"}\n    ${border ? `border-color: ${transparentize(0.3, border)};` : \"\"}\n  }\n      `;\n  }}\n  border-radius: 4px;\n  padding: 2px 7px;\n  text-transform: uppercase;\n  line-height: 12px;\n  font-family: ${({ theme }) => theme.fontFamily};\n  transition: all 200ms ease-in;\n`;\nStyledButton.defaultProps = { theme };\n\nexport const StyledGrid = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n  width: 100%;\n  overflow: hidden;\n`;\n\nexport const RESPONSIVE_SIZES = {\n  SMALL: \"xs\",\n  MEDIUM: \"md\",\n  LARGE: \"lg\"\n};\nconst RESPONSIVE_SIZES_PRIORITIES = {\n  [RESPONSIVE_SIZES.SMALL]: 1,\n  [RESPONSIVE_SIZES.MEDIUM]: 2,\n  [RESPONSIVE_SIZES.LARGE]: 3\n};\n\nfunction createResponsiveMediaCondition(size) {\n  const condition = (() => {\n    switch (size) {\n      case RESPONSIVE_SIZES.SMALL:\n        return \"max-width: 767px\";\n      case RESPONSIVE_SIZES.MEDIUM:\n        return \"min-width: 768px\";\n      case RESPONSIVE_SIZES.LARGE:\n        return \"min-width: 992px\";\n      default:\n        return \"\";\n    }\n  })();\n  return condition && `@media screen and (${condition})`;\n}\n\nconst memoizedRulesCreators = {};\nexport function createResponsiveRule(size) {\n  if (!memoizedRulesCreators[size]) {\n    const condition = createResponsiveMediaCondition(size);\n    memoizedRulesCreators[size] = (strings, ...values) =>\n      [\n        condition ? condition + \" {\\n\" : \"\",\n        strings.reduce(\n          (acc, aString, i) =>\n            `${acc}${aString}${i < values.length ? values[i] : \"\"}`,\n          \"\"\n        ),\n        condition ? \"\\n}\" : \"\"\n      ].join(\"\");\n  }\n  return memoizedRulesCreators[size];\n}\n\nconst cellPropsRegex = /^col-(\\d+)(-(xs|md|lg))?$/;\nexport const asStyledCell = component => styled(component)`\n  ${({ color }) => `background-color: ${color};`}\n  display: block;\n  overflow: auto;\n  box-sizing: border-box;\n  ${props => {\n    const cellRules = Object.keys(props)\n      .reduce((cellRules, prop) => {\n        const values = cellPropsRegex.exec(prop);\n        if (values) {\n          const width = values[1],\n            size = values[3];\n          const cssRule = createResponsiveRule(\n            size\n          )`flex: 0 0 auto; width: ${(width / 12) * 100}%;`;\n          cellRules.push({\n            cssRule,\n            ruleOrder: RESPONSIVE_SIZES_PRIORITIES[size] || 0\n          });\n        }\n        return cellRules;\n      }, [])\n      .sort((a, b) => a.ruleOrder - b.ruleOrder);\n    return `\n      flex: ${cellRules.some(x => x.ruleOrder === 0) ? \"0 0 auto\" : \"1 1 auto\"};\n      ${cellRules.map(x => x.cssRule).join(\"\\n\")}\n    `;\n  }};\n`;\nexport const StyledCell = asStyledCell(\"div\");\n","import * as React from \"react\";\nimport { StyledBox } from \"./components/design-system\";\n\nfunction Home() {\n  return (\n    <StyledBox>\n      <h2>About me</h2>\n      <p>\n        I'm just a really passionate programmer that is currently delving on the\n        misteries of the frontend side of web apps. It's a mess, but it is also\n        so much fun!\n      </p>\n      <p>\n        I'm from <b>Spain</b>, and currently living on <b>Madrid</b>, doing\n        web-stuff and trying to learn new things every day. My career has gone\n        from developing <b>.Net WebForms</b> to <b>.NET MVC</b> web sites and\n        finally making my escape to the front lines.\n      </p>\n      <p>\n        After some experiments with different frameworks, I found out that{\" \"}\n        <b>React</b> is the one I enjoy the best to use whenever I need a web\n        application. And yeah, I know it's not a framework, it's a library. And\n        yeah, I'd say that's the very reason I love it.\n      </p>\n      <section>\n        <p>\n          If you want to know more about me, you may look at any of the next\n          resources:\n        </p>\n        <ul>\n          <li>\n            <a href=\"https://www.linkedin.com/in/gonzalo-arrivi-duarte-19645724/\">\n              LinkedIn\n            </a>\n          </li>\n          <li>\n            <a href=\"https://codepen.io/Toujimon/\">Codepen.io</a>\n          </li>\n          <li>\n            <a href=\"https://github.com/Toujimon\">GitHub</a>\n          </li>\n          <li>\n            <a href=\"https://stackoverflow.com/users/859825/gonarrivi\">\n              StackOverflow\n            </a>\n          </li>\n        </ul>\n      </section>\n      <h2>About this site</h2>\n      <p>\n        This site was created as my own sandbox to test different web related\n        things creating little apps for my enjoyment. In this case using{\" \"}\n        <b>React</b> as the main frontend library (because I just love making\n        components) and the amazing\n        <b>styled-components</b> library to provide the styling (no CSS files\n        around here, folks!).\n      </p>\n    </StyledBox>\n  );\n}\n\nexport default Home;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport styled from \"styled-components\";\nimport { StyledButton } from \"./design-system\";\n\nconst valueFormatRegex = /(\\d+)(\\.\\d*)?([a-z]+)?/;\n\nconst StyledToggleButton = styled(StyledButton)`\n  position: absolute;\n  height: ${({ lineHeight }) => `${lineHeight.value}${lineHeight.unit}`};\n  right: 0;\n  bottom: 0;\n`;\n\nconst StyledWrapper = styled.div`\n  position: relative;\n  ${({ lineHeight }) => !lineHeight && `overflow: hidden; height: 0;`}\n  padding-bottom: ${({ isExpanded, lineHeight }) =>\n    (isExpanded && lineHeight && \"\" + lineHeight.value + lineHeight.unit) ||\n    \"0\"};\n`;\n\nconst StyledContainer = styled.div`\n  ${({ lineHeight }) =>\n    lineHeight && \"line-height: \" + lineHeight.value + lineHeight.unit + \";\"}\n  ${({ lineHeight, isExpanded, maxLines }) =>\n    lineHeight &&\n    !isExpanded &&\n    \"max-height: \" +\n      maxLines * lineHeight.value +\n      lineHeight.unit +\n      \";\" +\n      \"overflow: hidden;\"}\n`;\n\nexport default class StyledLineClamper extends React.Component {\n  static propTypes = {\n    maxLines: PropTypes.number.isRequired,\n    renderExpansionElement: PropTypes.func\n  };\n\n  static defaultProps = {\n    renderExpansionElement: (lineHeight, isExpanded, onExpansionToggle) => (\n      <StyledToggleButton\n        primary\n        lineHeight={lineHeight}\n        onClick={onExpansionToggle}\n      >\n        {isExpanded ? \"Show less\" : \"Show more\"}\n      </StyledToggleButton>\n    )\n  };\n\n  state = {\n    lineHeight: null,\n    isExpanded: false,\n    showExpansionToggle: false\n  };\n\n  _contentRef = React.createRef();\n\n  _refreshExpansionToggleState = () => {\n    const { lineHeight, showExpansionToggle: currentValue } = this.state;\n    const { maxLines } = this.props;\n    if (lineHeight) {\n      const contentElRect = this._contentRef.current.getBoundingClientRect();\n      const showExpansionToggle =\n        contentElRect.bottom - contentElRect.top > lineHeight.value * maxLines;\n      if (showExpansionToggle !== currentValue) {\n        this.setState({ showExpansionToggle });\n      }\n    }\n  };\n\n  _handleExpansionToggle = () => {\n    this.setState(prevState => ({ isExpanded: !prevState.isExpanded }));\n  };\n\n  componentDidMount() {\n    const computedStyle = window.getComputedStyle(this._contentRef.current);\n    const lineHeight = (() => {\n      const matches =\n        valueFormatRegex.exec(computedStyle.getPropertyValue(\"line-height\")) ||\n        valueFormatRegex.exec(computedStyle.getPropertyValue(\"font-size\"));\n      return {\n        value: matches[1],\n        unit: matches[3] || \"\"\n      };\n    })();\n    this.setState({ lineHeight }, () => {\n      this._refreshExpansionToggleState();\n      window.addEventListener(\"resize\", this._refreshExpansionToggleState);\n    });\n  }\n\n  componentDidUpdate = nextProps => {\n    this._refreshExpansionToggleState();\n  };\n\n  componentWillUnmount() {\n    window.removeEventListener(\"resize\", this._refreshExpansionToggleState);\n  }\n\n  render() {\n    const { children, maxLines, renderExpansionElement } = this.props;\n    const { lineHeight, isExpanded, showExpansionToggle } = this.state;\n    return (\n      <StyledWrapper lineHeight={lineHeight} isExpanded={isExpanded}>\n        <StyledContainer\n          lineHeight={lineHeight}\n          isExpanded={isExpanded}\n          maxLines={maxLines}\n        >\n          <div ref={this._contentRef}>{children}</div>\n        </StyledContainer>\n        {showExpansionToggle &&\n          renderExpansionElement(\n            lineHeight,\n            isExpanded,\n            this._handleExpansionToggle\n          )}\n      </StyledWrapper>\n    );\n  }\n}\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { Paper } from \"@material-ui/core\";\nimport { StyledButton, theme } from \"./design-system\";\n\nconst StyledWrapper = styled(Paper)`\n  display: flex;\n  flex-direction: column;\n  overflow: auto;\n  box-sizing: border-box;\n  width: 100%;\n`;\nconst footerHeaderStyles = `\n  height: 40px;\n  flex: 0 0 auto;\n  display: flex;\n  align-items: center;\n`;\nconst StyledHeader = styled.header`\n  ${footerHeaderStyles}\n  ${({ theme }) => `\n  background-color: ${theme.primary};\n  color: ${theme.textOverPrimary};\n  `}\n  padding: 0 8px;\n  text-transform: uppercase;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.5);\n`;\nStyledHeader.defaultProps = { theme };\nconst StyledContent = styled.div`\n  padding: 8px;\n  flex: 1 1 auto;\n  height: 100%;\n  overflow: auto;\n`;\nconst StyledFooter = styled.footer`\n  ${footerHeaderStyles}\n  border-top: 1px solid black;\n  justify-content: flex-end;\n`;\n\nconst StyledCommand = styled(StyledButton)`\n  border-radius: 0;\n  align-self: stretch;\n  border: 0;\n  border-left: 1px solid rgba(0, 0, 0, 0.5);\n`;\n\nfunction Widget(props) {\n  const { children, title, commands, ...wrapperProps } = props;\n  return (\n    <StyledWrapper {...wrapperProps}>\n      {!!title && <StyledHeader>{title}</StyledHeader>}\n      <StyledContent>{children}</StyledContent>\n      {!!commands && !!commands.length && (\n        <StyledFooter>\n          {commands.map(({ title, onInvoke, key, ...otherProps }, i) => (\n            <StyledCommand\n              key={key || i}\n              title={title}\n              onClick={onInvoke}\n              {...otherProps}\n            >\n              {title}\n            </StyledCommand>\n          ))}\n        </StyledFooter>\n      )}\n    </StyledWrapper>\n  );\n}\n\nexport default Widget;\n","/**\n * Modifies an element on an specific index of an array, returning the newly modified array.\n * @param {*} array Array whose element to be modified\n * @param {*} index Index of the element to be modified. It's expected to exist or it will throw an exception.\n * @param {*} getNewElement Function to generate the new element, it will be passed the current element\n * for that index as its first an only argument: (currentElement) => new Element. It's advised to be a pure function.\n * @returns A shallow copy of the original array with the same length and elements except for the modified one.\n */\nexport function modifyArrayElement(array, index, getNewElement) {\n  const currentElement = array[index];\n  return [\n    ...array.slice(0, index),\n    getNewElement(currentElement),\n    ...array.slice(index + 1)\n  ];\n}\n","import * as React from \"react\";\nimport * as PropTypes from \"prop-types\";\nimport styled from \"styled-components\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport {\n  faMinusSquare,\n  faPlusSquare,\n  faSquare\n} from \"@fortawesome/free-solid-svg-icons\";\n\nexport const DEFAULT_SIZE = 40;\n\nfunction getDiceValue(value) {\n  return Math.min(Math.max(isNaN(value) ? 0 : Number(value), 1), 6);\n}\n\nconst StyledDice = styled.span`\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  height: ${({ size }) => Math.max(size, 0) || DEFAULT_SIZE}px;\n  width: ${({ size }) => Math.max(size, 0) || DEFAULT_SIZE}px;\n  font-size: ${({ size }) => Math.floor(((Math.max(size, 0) || 40) * 3) / 4)}px;\n  border: 1px solid black;\n  border-radius: 4px;\n  background-color: white;\n  color: #333;\n  `;\n\nconst FateDie = props => {\n  const { value: propsValue, ...otherProps } = props;\n  const value = getDiceValue(propsValue);\n  return (\n    <StyledDice {...otherProps} title={\"\" + value}>\n      {value < 3 ? (\n        <FontAwesomeIcon icon={faMinusSquare} />\n      ) : value > 4 ? (\n        <FontAwesomeIcon icon={faPlusSquare} />\n      ) : (\n        <FontAwesomeIcon icon={faSquare} />\n      )}\n    </StyledDice>\n  );\n};\n\nFateDie.propTypes = {\n  value: PropTypes.oneOf([1, 2, 3, 4, 5, 6]).isRequired\n};\n\nexport default FateDie;\n","import * as React from \"react\";\nimport * as PropTypes from \"prop-types\";\nimport styled, { keyframes, css } from \"styled-components\";\nimport { lighten } from \"polished\";\nimport { theme } from \"./design-system\";\nimport FateDie from \"./fate-die\";\nexport { DEFAULT_SIZE } from \"./fate-die\";\n\nconst CLICK_ANIMATION_MILLISECONDS = 100;\n\nconst StyledWrapper = styled.span`\n  display: inline-flex;\n  align-items: center;\n`;\n\nconst hoveringKeyFrames = keyframes`\n  0% {\n    transform: scale(1);\n  }\n  50% {\n    transform: scale(1.2);\n  }\n  100%{\n    transform: scale(1);\n  }\n`;\n\nconst StyledSelectableFateDie = styled(FateDie)`\n  ${({ onClick }) =>\n    onClick\n      ? css`\n          cursor: pointer;\n          &:hover {\n            animation: ${hoveringKeyFrames} 0.8s linear infinite;\n          }\n        `\n      : \"\"}\n  ${({ selected, theme }) =>\n    selected ? `background-color: ${lighten(0.3, theme.primary)};` : \"\"}\n`;\nStyledSelectableFateDie.defaultProps = {\n  theme\n};\n\nconst clickedKeyFrames = keyframes`\n  0% {\n    transform: translateY(0);\n  }\n  50% {\n    transform: translateY(-10px);\n  }\n  100%{\n    transform: translateY(0);\n  }\n`;\n\nconst StyledSelectionChangedFateDice = styled(StyledSelectableFateDie)`\n  animation: ${css`\n    ${clickedKeyFrames} ${CLICK_ANIMATION_MILLISECONDS}ms linear\n  `};\n`;\n\nclass FateDice extends React.Component {\n  state = {\n    selectionChangedIndex: -1\n  };\n  _memoizedHandlers = {};\n\n  _onSelectionChange = (handler, index, ...args) => {\n    if (this.state.selectionChangedIndex !== index) {\n      this.setState({ selectionChangedIndex: index }, () =>\n        setTimeout(\n          () =>\n            this.setState({ selectionChangedIndex: -1 }, () =>\n              handler(index, ...args)\n            ),\n          CLICK_ANIMATION_MILLISECONDS\n        )\n      );\n    }\n  };\n\n  _getMemoizedHandler = (index, handler) => {\n    if (!this._memoizedHandlers[index]) {\n      this._memoizedHandlers[index] = handler\n        ? (...args) => this._onSelectionChange(handler, index, ...args)\n        : null;\n    }\n    return this._memoizedHandlers[index];\n  };\n\n  render() {\n    const { dice, onDieSelect } = this.props;\n    const { selectionChangedIndex } = this.state;\n    return (\n      <StyledWrapper>\n        <span>\n          {dice.map((x, i) =>\n            selectionChangedIndex !== i ? (\n              <StyledSelectableFateDie\n                value={x.value}\n                selected={x.selected}\n                onClick={this._getMemoizedHandler(i, onDieSelect)}\n              />\n            ) : (\n              <StyledSelectionChangedFateDice\n                value={x.value}\n                selected={x.selected}\n              />\n            )\n          )}\n        </span>\n      </StyledWrapper>\n    );\n  }\n}\n\nFateDice.propTypes = {\n  rollId: PropTypes.any.isRequired,\n  dice: PropTypes.arrayOf(\n    PropTypes.shape({\n      value: PropTypes.number.isRequired,\n      rerollCount: PropTypes.number.isRequired,\n      selected: PropTypes.bool\n    })\n  ).isRequired,\n  onDieSelect: PropTypes.func\n};\n\nexport default FateDice;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport styled from \"styled-components\";\nimport { StyledBox } from \"./design-system\";\nimport Widget from \"./widget\";\nimport * as Helpers from \"../helpers\";\nimport { DEFAULT_SIZE } from \"./fate-die\";\nimport FateDice from \"./fate-dice\";\n\nconst DICE_COUNT = 4;\n\nconst StyledBoard = styled.span`\n  display: inline-flex;\n  align-items: center;\n`;\n\nconst StyledText = styled.span`\n  line-height: ${DEFAULT_SIZE}px;\n  font-size: ${Math.floor((DEFAULT_SIZE * 3) / 4)}px;\n`;\n\nfunction DiceRollerWidget(props) {\n  const {\n    dice,\n    selectedSkill,\n    rollId,\n    onDieSelect,\n    rerollCount,\n    onSelectedDiceReroll,\n    onRoll,\n    onClear,\n    ...wrapperProps\n  } = props;\n  const diceValue = (dice || []).reduce(\n    (finalValue, { value }) =>\n      finalValue + (value < 3 ? -1 : value > 4 ? 1 : 0),\n    0\n  );\n  const finalValue = diceValue + (selectedSkill ? selectedSkill.value : 0);\n  const someSelectedDice = (dice || []).some(x => x.selected);\n  return (\n    <Widget\n      {...wrapperProps}\n      title={\n        selectedSkill\n          ? `${selectedSkill.name} +${selectedSkill.value}`\n          : \"--No selected skill--\"\n      }\n      commands={[\n        { title: \"Clear\", onInvoke: onClear, key: \"clear\" },\n        {\n          title: dice ? \"New roll\" : \"Roll!\",\n          onInvoke: onRoll,\n          key: \"roll\",\n          primary: true\n        }\n      ].concat(\n        someSelectedDice\n          ? {\n              title: \"re-roll selected dice\",\n              onInvoke: onSelectedDiceReroll,\n              key: \"reroll\",\n              primary: true\n            }\n          : []\n      )}\n    >\n      {!dice ? (\n        <React.Fragment>\n          <StyledText>Roll the dice!</StyledText>\n        </React.Fragment>\n      ) : (\n        <StyledBoard>\n          <FateDice rollId={rollId} dice={dice} onDieSelect={onDieSelect} />\n          <StyledText>\n            &nbsp;=&nbsp;\n            {`${diceValue}${\n              selectedSkill ? ` + ${selectedSkill.value} = ${finalValue}` : \"\"\n            }`}\n          </StyledText>\n          <span>(Re-rolls: {rerollCount})</span>\n        </StyledBoard>\n      )}\n    </Widget>\n  );\n}\n\nclass FateDiceRoller extends React.Component {\n  static propTypes = {\n    skills: PropTypes.arrayOf(\n      PropTypes.shape({\n        name: PropTypes.string.isRequired,\n        value: PropTypes.number.isRequired\n      })\n    )\n  };\n  state = {\n    dice: null,\n    rollCount: 0,\n    rerollCount: 0,\n    selectedSkillIndex: -1\n  };\n  _handleRoll = e => {\n    this.setState(prevState => ({\n      dice: Array.from({ length: DICE_COUNT }).map((x, index) => ({\n        value: getRandomDieValue(),\n        rerollCount: 0,\n        selected: false\n      })),\n      rollCount: prevState.rollCount + 1,\n      rerollCount: 0\n    }));\n  };\n  _handleSelectedDiceReroll = e => {\n    this.setState(prevState => ({\n      dice: prevState.dice.map(x =>\n        x.selected\n          ? {\n              value: getRandomDieValue(),\n              rerollCount: x.rerollCount + 1,\n              selected: false\n            }\n          : x\n      ),\n      rerollCount: prevState.rerollCount + 1\n    }));\n  };\n  _handleClear = e => {\n    this.setState({ dice: null });\n  };\n  _handleDieSelect = index => {\n    this.setState(prevState => ({\n      dice: Helpers.modifyArrayElement(prevState.dice, index, currentDie => ({\n        ...currentDie,\n        selected: !currentDie.selected\n      }))\n    }));\n  };\n  _handleSelectedSkillIndexChange = e => {\n    const { selectedSkillIndex: currentSelectedSkillIndex } = this.state;\n    const selectedSkillIndex = Number(e.currentTarget.value);\n    if (currentSelectedSkillIndex !== selectedSkillIndex) {\n      this.setState({ selectedSkillIndex, dice: null, rollCount: 0 });\n    }\n  };\n  render() {\n    const { skills } = this.props;\n    const { dice, rollCount, rerollCount, selectedSkillIndex } = this.state;\n    const selectedSkill = skills[selectedSkillIndex];\n    return (\n      <StyledBox {...this.props}>\n        <DiceRollerWidget\n          dice={dice}\n          selectedSkill={selectedSkill}\n          onRoll={this._handleRoll}\n          onDieSelect={this._handleDieSelect}\n          onSelectedDiceReroll={this._handleSelectedDiceReroll}\n          onClear={this._handleClear}\n          rollId={`${selectedSkillIndex}-${rollCount}`}\n          rerollCount={rerollCount}\n        />\n        <StyledBox>\n          <header>Skills</header>\n          <ul>\n            {[{ name: \"--None--\", value: 0 }, ...skills].map((x, i) => (\n              <li key={i}>\n                <label>\n                  <input\n                    name=\"skill\"\n                    value={i - 1}\n                    checked={selectedSkillIndex === i - 1}\n                    type=\"radio\"\n                    onChange={this._handleSelectedSkillIndexChange}\n                  />\n                  <span>{`${x.name} (+${x.value})`}</span>\n                </label>\n              </li>\n            ))}\n          </ul>\n        </StyledBox>\n      </StyledBox>\n    );\n  }\n}\n\nexport default FateDiceRoller;\n\nfunction getRandomDieValue() {\n  return 1 + Math.floor(Math.random() * 6);\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport styled from \"styled-components\";\nimport { Paper } from \"@material-ui/core\";\nimport { StyledBox } from \"./design-system\";\nimport Widget from \"./widget\";\nimport { modifyArrayElement } from \"../helpers\";\n\nconst SKILLS_PIRAMID_TOP = 4;\n\nconst HiddenStyledBox = styled(StyledBox)`\n  display: none;\n`;\n\nconst StyledFieldSet = props => <Paper {...props} />;\n\nclass FateCharacterSheet extends React.Component {\n  static propTypes = {\n    onSubmit: PropTypes.func,\n    defaultValues: PropTypes.object\n  };\n  state = {\n    id: {\n      name: \"\",\n      description: \"\"\n    },\n    aspects: {\n      highConcept: null,\n      problem: null,\n      others: []\n    },\n    skills: Array.from({ length: SKILLS_PIRAMID_TOP }).reduce((acc, x, i) => {\n      return acc.concat(\n        Array.from({ length: i + 1 }).map((y, j) => ({\n          value: SKILLS_PIRAMID_TOP - i,\n          name: \"\"\n        }))\n      );\n    }, []),\n    stunts: [],\n    extras: [],\n    stressTracks: { physical: 2, mental: 2 },\n    consequences: [null, null, null],\n    ...this.props.defaultValues\n  };\n  _handleNameChange = ev => {\n    const name = ev.currentTarget.value;\n    this.setState(prevState => ({ id: { ...prevState.id, name } }));\n  };\n  _handleSkillNameChange = (i, ev) => {\n    const name = ev.currentTarget.value;\n    this.setState(prevState => ({\n      skills: modifyArrayElement(prevState.skills, i, curElement => ({\n        ...curElement,\n        name\n      }))\n    }));\n  };\n  _handleSubmit = event => {\n    const { onSubmit } = this.props;\n    event.preventDefault();\n    onSubmit &&\n      onSubmit(\n        { ...this.state, skills: this.state.skills.filter(x => x.name) },\n        event\n      );\n  };\n  render() {\n    const { onSubmit, defaultValues, ...wrapperProps } = this.props;\n    const {\n      id,\n      //aspects,\n      skills\n      //stunts,\n      //extras,\n      //stressTracks,\n      //consequences\n    } = this.state;\n    const groupedSkills = skills.reduce((acc, skill, i) => {\n      if (!acc[skill.value]) {\n        acc[skill.value] = [];\n      }\n      acc[skill.value].push({ id: i, name: skill.name });\n      return acc;\n    }, {});\n    return (\n      <Widget\n        {...wrapperProps}\n        commands={[{ title: \"Save\", onInvoke: this._handleSubmit }]}\n      >\n        <form onSubmit={this._handleSubmit}>\n          <StyledFieldSet>\n            <header>Id</header>\n            <label>\n              <input\n                type=\"text\"\n                placeholder=\"Name\"\n                value={id.name}\n                onChange={this._handleNameChange}\n              />\n            </label>\n          </StyledFieldSet>\n          <HiddenStyledBox>\n            <header>Aspects</header>\n            <div>Aspects component</div>\n          </HiddenStyledBox>\n          <StyledBox>\n            <header>Skills</header>\n            <ul>\n              {Object.keys(groupedSkills)\n                .sort((a, b) => 0 + b - a)\n                .map(key => (\n                  <li key={key}>\n                    + {key}\n                    <ul>\n                      {groupedSkills[key].map(item => (\n                        <li key={item.id}>\n                          <input\n                            type=\"text\"\n                            value={item.name}\n                            onChange={ev =>\n                              this._handleSkillNameChange(item.id, ev)\n                            }\n                          />\n                        </li>\n                      ))}\n                    </ul>\n                  </li>\n                ))}\n            </ul>\n          </StyledBox>\n          <HiddenStyledBox>\n            <header>Stunts</header>\n            <div>Stunts Component</div>\n          </HiddenStyledBox>\n          <HiddenStyledBox>\n            <header>Extras</header>\n            <div>Extras Component</div>\n          </HiddenStyledBox>\n          <HiddenStyledBox>\n            <header>Stress</header>\n            <div>Stress Component</div>\n          </HiddenStyledBox>\n          <HiddenStyledBox>\n            <header>Consequences</header>\n            <div>Consequences Component</div>\n          </HiddenStyledBox>\n        </form>\n      </Widget>\n    );\n  }\n}\n\nexport default FateCharacterSheet;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport styled from \"styled-components\";\nimport { StyledButton, theme } from \"./design-system\";\nimport Widget from \"./widget\";\nimport FateDiceRoller from \"./fate-dice-roller\";\nimport FateCharacterSheet from \"./fate-character-sheet\";\n\nconst MY_FATE_CHARACTERS_KEY = \"MY_FATE_CHARACTERS\";\n\nconst StyledOptions = styled.ul`\n  list-style: none;\n  margin: 0;\n  padding: 0;\n  display: flex;\n  flex-direction: column;\n  width: 300px;\n  overflow: hidden;\n`;\n\nStyledOptions.Item = styled.li`\n  flex: 1 1 auto;\n  :not(:first-child) {\n    margin-top: 8px;\n  }\n`;\n\nStyledOptions.Item.Button = styled(StyledButton)`\n  height: 40px;\n  width: 100%;\n`;\n\nStyledOptions.Item.Button.defaultProps = { theme };\n\nclass FateCharacterManager extends React.Component {\n  static propTypes = {\n    onSubmit:\n      PropTypes.func.isRequired /* ({skills, ...characterFields}) => any */\n  };\n  state = {\n    selectionMethod: null,\n    existingCharacters:\n      (() => {\n        if (localStorage) {\n          const strMyCharacters = localStorage.getItem(MY_FATE_CHARACTERS_KEY);\n          if (strMyCharacters) {\n            try {\n              return JSON.parse(strMyCharacters);\n            } catch (e) {\n              localStorage.removeItem(MY_FATE_CHARACTERS_KEY);\n            }\n          }\n        }\n        return null;\n      })() || []\n  };\n  _handleNewClick = () => this.setState({ selectionMethod: \"new\" });\n  _handleExistingClick = () => this.setState({ selectionMethod: \"existing\" });\n  _handleSelectionReset = () => this.setState({ selectionMethod: null });\n  _handleNewCharacterSubmit = newCharacter => {\n    const { onSubmit } = this.props;\n    const { existingCharacters } = this.state;\n    const newCharacterName = newCharacter.id.name;\n    if (newCharacterName) {\n      if (!existingCharacters.some(x => x.id.name === newCharacterName)) {\n        this.setState(\n          prevState => ({\n            existingCharacters: prevState.existingCharacters.concat({\n              ...newCharacter\n            })\n          }),\n          () => {\n            if (localStorage) {\n              localStorage.setItem(\n                MY_FATE_CHARACTERS_KEY,\n                JSON.stringify(this.state.existingCharacters)\n              );\n            }\n            onSubmit(newCharacter);\n          }\n        );\n      } else {\n        alert(\"There is an already existing character with that name\");\n      }\n    } else {\n      alert(\"Every character needs a name\");\n    }\n  };\n  render() {\n    const { selectionMethod, existingCharacters } = this.state;\n    const { onSubmit } = this.props;\n    return (\n      <Widget\n        commands={\n          !selectionMethod\n            ? [\n                {\n                  title: \"Load an existing character\",\n                  disabled: !existingCharacters.length,\n                  onInvoke: this._handleExistingClick\n                },\n                {\n                  title: \"create a new character\",\n                  onInvoke: this._handleNewClick,\n                  primary: true\n                }\n              ]\n            : [{ title: \"Go back\", onInvoke: this._handleSelectionReset }]\n        }\n      >\n        <h2>\n          {!selectionMethod\n            ? \"Want to play? first you'll need a character...\"\n            : selectionMethod === \"new\"\n            ? \"Nice! Make it your own!\"\n            : \"Cool! Here they are for you to choose from\"}\n        </h2>\n        {selectionMethod && (\n          <React.Fragment>\n            {selectionMethod === \"new\" ? (\n              <FateCharacterSheet onSubmit={this._handleNewCharacterSubmit} />\n            ) : (\n              <StyledOptions>\n                {[...existingCharacters].map((character, i) => (\n                  <StyledOptions.Item key={i}>\n                    <StyledOptions.Item.Button\n                      onClick={() => onSubmit(character)}\n                    >\n                      {character.id.name}\n                    </StyledOptions.Item.Button>\n                  </StyledOptions.Item>\n                ))}\n              </StyledOptions>\n            )}\n          </React.Fragment>\n        )}\n      </Widget>\n    );\n  }\n}\n\nclass FateManager extends React.Component {\n  state = {\n    selectedCharacter: null\n  };\n  _handleCharacterSubmit = selectedCharacter => {\n    this.setState({ selectedCharacter });\n  };\n  _handleCharacterChangeRequest = () => {\n    this.setState({ selectedCharacter: null });\n  };\n  render() {\n    const { ...wrapperProps } = this.props;\n    const { selectedCharacter } = this.state;\n    return (\n      <Widget title=\"Fate manager\" {...wrapperProps}>\n        {!selectedCharacter ? (\n          <FateCharacterManager onSubmit={this._handleCharacterSubmit} />\n        ) : (\n          <React.Fragment>\n            <header>\n              You are playing with: <b>{selectedCharacter.id.name}</b>&nbsp;\n              <StyledButton onClick={this._handleCharacterChangeRequest}>\n                Change character\n              </StyledButton>\n            </header>\n            <FateDiceRoller skills={selectedCharacter.skills} />\n          </React.Fragment>\n        )}\n      </Widget>\n    );\n  }\n}\n\nexport default FateManager;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { StyledBox } from \"./components/design-system\";\nimport LineClamper from \"./components/line-clamper\";\nimport FateManager from \"./components/fate-manager\";\n\nconst StyledList = styled.ul`\n  margin: 0;\n`;\n\nclass FateProject extends React.Component {\n  state = {\n    strSkills: (() => {\n      if (localStorage) {\n        const strFateCoreSkillTable = localStorage.getItem(\n          \"FATE_CORE_SKILLS_TABLE\"\n        );\n        return strFateCoreSkillTable || null;\n      }\n      return null;\n    })()\n  };\n  _canSetState = true;\n  componentDidMount() {\n    const { strSkills } = this.state;\n    if (strSkills === null) {\n      fetch(\"https://fate-srd.com/fate-core/default-skill-list\")\n        .then(response => response.text())\n        .then(text => new DOMParser().parseFromString(text, \"text/html\"))\n        .then(doc => {\n          const elFateCoreSkillTable = doc.querySelector(\".skill-list\");\n          if (elFateCoreSkillTable) {\n            const strFateCoreSkillTable = elFateCoreSkillTable.innerHTML;\n            if (localStorage) {\n              localStorage.setItem(\n                \"FATE_CORE_SKILLS_TABLE\",\n                strFateCoreSkillTable\n              );\n            }\n            if (this._canSetState) {\n              this.setState({ strSkills: strFateCoreSkillTable });\n            }\n          } else {\n            throw new Error(\"FATE CORE skill table element not found\");\n          }\n        })\n        .catch(e => {\n          console.error(e);\n          this.setState({ strSkills: \"\" });\n        });\n    }\n  }\n  componentWillUnmount() {\n    this._canSetState = false;\n  }\n  render() {\n    const { strSkills } = this.state;\n    return (\n      <React.Fragment>\n        <h2>FATE CORE Utils</h2>\n        <p>\n          A little project to test the different libraries and React related\n          technologies with a more specific target in mind, in this case,\n          utility tools for the FATE CORE role-playing-game system.\n        </p>\n        <StyledBox>\n          <h3>Some use cases to cover</h3>\n          <LineClamper maxLines={2}>\n            <StyledList>\n              <li>Create new character</li>\n              <li>Set a created character as the current character</li>\n              <li>Unset the current character</li>\n              <li>\n                Make skill check (throw dice) using one of the current\n                character's skills\n              </li>\n              <li>Re-roll some dice from current skill check</li>\n              <li>Add bonus to current skill check</li>\n            </StyledList>\n          </LineClamper>\n        </StyledBox>\n        {strSkills !== null ? <FateManager /> : \"Something is loading...\"}\n      </React.Fragment>\n    );\n  }\n}\n\nexport default FateProject;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { StyledBox } from \"./components/design-system\";\nimport {\n  Typography,\n  Grid,\n  Toolbar,\n  Select,\n  Button,\n  IconButton,\n  TablePagination\n} from \"@material-ui/core\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport {\n  faEye,\n  faSadTear,\n  faSmile,\n  faPlus\n} from \"@fortawesome/free-solid-svg-icons\";\nimport { withAuth } from \"@okta/okta-react\";\n\nexport default function EpicCafeManager() {\n  return (\n    <React.Fragment>\n      <Typography variant=\"h2\">Epic Cafe Manager</Typography>\n      <Typography variant=\"subtitle1\">\n        Management tools for the Epic Cafe game's catalog\n      </Typography>\n      <StyledBox>\n        <Typography variant=\"h3\">Board Game Geek matcher tool</Typography>\n        <Typography variant=\"subtitle2\">\n          A tool to properly match the diferent entries of the Epic Cafe catalog\n          to the well known Board Game Geek database entries, so extra meta-data\n          about the different games can be retrieved.\n        </Typography>\n        <EpicBggMatcherContainer />\n      </StyledBox>\n    </React.Fragment>\n  );\n}\n\n/*-- PRIVATE COMPONENTS --*/\n/* To be refactored out if it seems like it may be useful on other modules */\n\nconst EpicBggMatcherContainer = withAuth(function EpicBggMatcherContainer({\n  auth\n}) {\n  const [[catalog, mustFetch], setState] = React.useState([null, true]);\n  function setCatalog(catalog) {\n    setState([catalog, false]);\n  }\n  function refetchCatalog() {\n    setState([catalog, true]);\n  }\n\n  function fetchWithAuth(url, options = {}) {\n    return auth.getAccessToken().then(token =>\n      fetch(url, {\n        ...options,\n        headers: {\n          ...options.headers,\n          Authorization: `Bearer ${token}`\n        }\n      })\n    );\n  }\n\n  React.useEffect(() => {\n    if (mustFetch) {\n      fetchWithAuth(\"/api/catalog\")\n        .then(response =>\n          response\n            .json()\n            .then(jsonData => jsonData)\n            .then(({ epicCatalog, bggCatalog, epicBggJoin }) => {\n              return epicCatalog.map(\n                ({ id, name, players, age, coordinates }) => {\n                  return {\n                    id,\n                    name,\n                    players:\n                      players.type === \"range\" || players.type === \"min\"\n                        ? `${players.min} - ${players.max || \"\"}`\n                        : players.type,\n                    age,\n                    coordinates,\n                    bggMatchId: epicBggJoin[id].bggMatchId,\n                    foundBggMatches:\n                      epicBggJoin[id].foundBggMatches &&\n                      epicBggJoin[id].foundBggMatches.map(\n                        matchId => bggCatalog[matchId]\n                      )\n                  };\n                }\n              );\n            })\n        )\n        .catch(error => {\n          console.log(error);\n          return [];\n        })\n        .then(processedCatalog => {\n          setCatalog(processedCatalog);\n        });\n    }\n  }, [mustFetch]);\n\n  function handleEpicBggMatchConfirm(id, bggMatchId) {\n    fetchWithAuth(\"/api/catalog\", {\n      method: \"put\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({ id, bggMatchId })\n    }).then(res => {\n      if (res.status === 200) {\n        refetchCatalog();\n      } else {\n        console.error(\"Error while trying to update data:\", res.statusText);\n      }\n    });\n  }\n\n  function handleEpicBggMatchesClean(id) {\n    fetchWithAuth(\"/api/catalog\", {\n      method: \"delete\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({ id })\n    }).then(res => {\n      if (res.status === 200) {\n        refetchCatalog();\n      } else {\n        console.error(\"Error while trying to clean matches:\", res.statusText);\n      }\n    });\n  }\n\n  function handleEpicBggMatchAdd(id, bggMatchId) {\n    fetchWithAuth(\"/api/catalog\", {\n      method: \"post\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({ id, bggMatchId })\n    }).then(res => {\n      if (res.status === 200) {\n        refetchCatalog();\n      } else {\n        console.error(\"Error while trying to update data:\", res.statusText);\n      }\n    });\n  }\n\n  return catalog === null ? (\n    \"Loading catalog information, may take a while...\"\n  ) : (\n    <EpicBggMatcher\n      games={catalog}\n      onEpicBggMatchConfirm={handleEpicBggMatchConfirm}\n      onEpicBggMatchesClean={handleEpicBggMatchesClean}\n      onEpicBggMatchAdd={handleEpicBggMatchAdd}\n    />\n  );\n});\n\nconst PAGE_SIZE = 50;\nconst MATCHES_FILTERS = [\n  [\"All\", null],\n  [\"No matches\", x => !x.foundBggMatches || !x.foundBggMatches.length],\n  [\"Just one match\", x => x.foundBggMatches && x.foundBggMatches.length === 1],\n  [\n    \"Multiple matches (2 .. 5)\",\n    x =>\n      x.foundBggMatches &&\n      x.foundBggMatches.length > 1 &&\n      x.foundBggMatches.length < 6\n  ],\n  [\n    \"Multiple matches (6 ... 10)\",\n    x =>\n      x.foundBggMatches &&\n      x.foundBggMatches.length > 5 &&\n      x.foundBggMatches.length < 11\n  ],\n  [\n    \"Multiple matches (11 ... 20)\",\n    x =>\n      x.foundBggMatches &&\n      x.foundBggMatches.length > 10 &&\n      x.foundBggMatches.length < 21\n  ],\n  [\n    \"Multiple matches (21 ... 50)\",\n    x =>\n      x.foundBggMatches &&\n      x.foundBggMatches.length > 20 &&\n      x.foundBggMatches.length < 51\n  ],\n  [\n    \"Multiple matches (51 ... )\",\n    x => x.foundBggMatches && x.foundBggMatches.length > 51\n  ]\n];\n\nconst CONFIRMED_FILTERS = [\n  [\"All\", null],\n  [\"Not confirmed\", x => !x.bggMatchId],\n  [\"Confirmed\", x => !!x.bggMatchId]\n];\n\nconst FILTERS = MATCHES_FILTERS.map(([, matchesFilter]) =>\n  CONFIRMED_FILTERS.map(([, confirmedFilter]) => x =>\n    (!matchesFilter || matchesFilter(x)) &&\n    (!confirmedFilter || confirmedFilter(x))\n  )\n);\n\nconst StyledGrid = styled(Grid)`\n  border-bottom: 1px solid rgba(0, 0, 0, 0.1);\n`;\n\nfunction EpicBggMatcher({\n  games,\n  onEpicBggMatchConfirm,\n  onEpicBggMatchesClean,\n  onEpicBggMatchAdd\n}) {\n  const [\n    [page, appliedMatchesFilterIndex, appliedConfirmedFilterIndex],\n    setState\n  ] = React.useState([0, 0, 0]);\n  const setPage = page =>\n    setState([page, appliedMatchesFilterIndex, appliedConfirmedFilterIndex]);\n  const setAppliedMatchedFilterIndex = appliedMatchesFilterIndex =>\n    setState([0, appliedMatchesFilterIndex, appliedConfirmedFilterIndex]);\n  const setAppliedConfirmedFilterIndex = appliedConfirmedFilterIndex =>\n    setState([0, appliedMatchesFilterIndex, appliedConfirmedFilterIndex]);\n\n  const appliedFilter =\n    (FILTERS[appliedMatchesFilterIndex] || [])[appliedConfirmedFilterIndex] ||\n    null;\n\n  const [displayedGames, filteredGamesCount] = React.useMemo(() => {\n    const filteredGames = !appliedFilter ? games : games.filter(appliedFilter);\n    const displayedGames = filteredGames.slice(\n      page * PAGE_SIZE,\n      (page + 1) * PAGE_SIZE\n    );\n    return [displayedGames, filteredGames.length];\n  }, [games, page, appliedFilter]);\n\n  React.useEffect(() => {\n    if (page > 0 && !displayedGames.length) {\n      setPage(0);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [displayedGames, page]);\n\n  return (\n    <StyledBox>\n      <Grid container>\n        <Grid item md={8}>\n          <Toolbar>\n            <Select\n              value={appliedMatchesFilterIndex}\n              native\n              onChange={event =>\n                setAppliedMatchedFilterIndex(Number(event.currentTarget.value))\n              }\n            >\n              {MATCHES_FILTERS.map(([text], index) => (\n                <option key={index} value={index}>\n                  {text}\n                </option>\n              ))}\n            </Select>\n            <Select\n              value={appliedConfirmedFilterIndex}\n              native\n              onChange={event =>\n                setAppliedConfirmedFilterIndex(\n                  Number(event.currentTarget.value)\n                )\n              }\n            >\n              {CONFIRMED_FILTERS.map(([text], index) => (\n                <option key={index} value={index}>\n                  {text}\n                </option>\n              ))}\n            </Select>\n          </Toolbar>\n        </Grid>\n        <Grid item md={4} xs={12}>\n          <TablePagination\n            component=\"div\"\n            count={filteredGamesCount}\n            rowsPerPage={PAGE_SIZE}\n            rowsPerPageOptions={[PAGE_SIZE]}\n            page={page}\n            onChangePage={(event, newPage) => setPage(newPage)}\n          />\n        </Grid>\n      </Grid>\n\n      <ul>\n        {displayedGames.map(\n          ({ id, name, players, age, bggMatchId, foundBggMatches }) => (\n            <StyledGrid container component=\"li\" key={id}>\n              <Grid component={Toolbar} item xs={12} md={5}>\n                <div>\n                  <Typography>{name}</Typography>\n                  <Typography variant=\"caption\">\n                    Players: {players}, Age: {age}\n                  </Typography>\n                </div>\n              </Grid>\n              <Grid component={Toolbar} item xs={12} md={1}>\n                {bggMatchId ? (\n                  <IconButton\n                    onClick={() =>\n                      window.open(\n                        `https://boardgamegeek.com/boardgame/${bggMatchId}`,\n                        \"epicBggMatchViewer\",\n                        \"titlebar=no\"\n                      )\n                    }\n                  >\n                    <FontAwesomeIcon icon={faEye} />\n                  </IconButton>\n                ) : (\n                  <Typography>None</Typography>\n                )}\n              </Grid>\n              <Grid item xs={12} md={6}>\n                {/* {JSON.stringify(game.foundBggMatches)} */}\n\n                <BggMatchSelector\n                  matches={foundBggMatches || []}\n                  currentMatch={bggMatchId}\n                  onMatchConfirm={matchId => onEpicBggMatchConfirm(id, matchId)}\n                  onMatchesClean={() => onEpicBggMatchesClean(id)}\n                  onMatchAdd={matchId => onEpicBggMatchAdd(id, matchId)}\n                />\n              </Grid>\n            </StyledGrid>\n          )\n        )}\n      </ul>\n    </StyledBox>\n  );\n}\n\nconst StyledSelect = styled(Select)`\n  flex: 1 1 auto;\n`;\n\nconst StyledButton = styled(Button)`\n  white-space: nowrap;\n`;\n\nfunction BggMatchSelector({\n  matches,\n  currentMatch = null,\n  onMatchConfirm,\n  onMatchesClean,\n  onMatchAdd\n}) {\n  const [selected, setSelected] = React.useState(\n    currentMatch || (matches.length && matches[0].id) || null\n  );\n  // const currentlySelected = matches.find(x => x.id === selected);\n  return (\n    <Toolbar>\n      {matches.length ? (\n        <React.Fragment>\n          <StyledSelect\n            value={selected || \"\"}\n            native\n            onChange={event => setSelected(event.currentTarget.value || null)}\n          >\n            <option value=\"\"></option>\n            {matches.map(({ id, name, yearpublished }) => (\n              <option key={id} value={id}>\n                {typeof name[0] === \"string\" ? name[0] : name[0][\"_\"]} (\n                {yearpublished ? yearpublished[0] : \"???\"})\n              </option>\n            ))}\n          </StyledSelect>\n          <IconButton\n            onClick={() =>\n              window.open(\n                `https://boardgamegeek.com/boardgame/${selected}`,\n                \"bggMatchViewer\",\n                \"titlebar=no\"\n              )\n            }\n          >\n            <FontAwesomeIcon icon={faEye} />\n          </IconButton>\n          {selected !== currentMatch ? (\n            <StyledButton onClick={() => onMatchConfirm(selected)}>\n              {selected ? \"Confirm match\" : \"Remove current match\"}\n            </StyledButton>\n          ) : (\n            <Button onClick={() => onMatchesClean()}>Clean matches</Button>\n          )}\n        </React.Fragment>\n      ) : (\n        <Typography>\n          {!currentMatch ? \"No matches found\" : \"Match already confirmed\"}{\" \"}\n          <FontAwesomeIcon icon={!currentMatch ? faSadTear : faSmile} />\n        </Typography>\n      )}\n      <IconButton\n        onClick={event => {\n          const newBggMatchId = prompt(\"Add a new game match\");\n          if (newBggMatchId) {\n            onMatchAdd(newBggMatchId);\n          }\n        }}\n      >\n        <FontAwesomeIcon icon={faPlus} />\n      </IconButton>\n    </Toolbar>\n  );\n}\n\n/*-- UTILITY FUNCTIONS --*/\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { BrowserRouter, Route, Switch } from \"react-router-dom\";\nimport styled, { ThemeProvider } from \"styled-components\";\nimport { theme } from \"./components/design-system\";\nimport {\n  AppBar,\n  Avatar,\n  Container,\n  CssBaseline,\n  Tabs,\n  Tab,\n  Typography,\n  Button\n} from \"@material-ui/core\";\nimport homeBannerImage from \"./assets/images/home-banner.jpg\";\nimport homeAvatarImage from \"./assets/images/home-avatar.jpeg\";\nimport Home from \"./home\";\nimport FateProject from \"./fate-project\";\nimport EpicCafeManager from \"./epic-cafe-manager\";\nimport { Security, ImplicitCallback, withAuth } from \"@okta/okta-react\";\n\nconst config = {\n  issuer: `https://dev-341005.okta.com/oauth2/default`,\n  redirectUri: window.location.origin + \"/gonarrivi-sandbox/implicit/callback\",\n  clientId: \"0oa249gcgj2McxEJn4x6\",\n  pkce: true\n};\n\n/* TODO: Add async process to detect if its allowed */\nconst isApiAllowed = window.location.hostname === \"localhost\";\n\nconst appTheme = { ...theme, primary: \"#199e57\" };\n\nconst StyledAppBar = styled(AppBar)`\n  flex-direction: row;\n`;\nconst StyledAppBarTabs = styled(Tabs)`\n  flex: 0 0 auto;\n  margin-left: auto;\n`;\n\nconst StyledTopBanner = styled.div`\n  ${props =>\n    props.background\n      ? `background-image: url(${props.background});\n      background-size: cover;`\n      : \"background-color: transparent;\"}\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 24px;\n  text-align: center;\n  ${({ textColor }) => (textColor ? `color: ${textColor};` : \"\")}\n`;\n\nconst StyledAvatar = styled(Avatar)`\n  width: 120px;\n  height: 120px;\n`;\n\nfunction LoginButton({ isAuthenticated, onLogin, onLogout }) {\n  return isAuthenticated ? (\n    <Button onClick={onLogout}>Logout</Button>\n  ) : (\n    <Button onClick={onLogin}>Login</Button>\n  );\n}\n\nconst AppContent = withAuth(function AppContent({ auth }) {\n  const [authenticated, setAuthenticated] = React.useState(null);\n  React.useEffect(() => {\n    auth.isAuthenticated().then(confirmation => {\n      if (confirmation !== authenticated) {\n        setAuthenticated(confirmation);\n      }\n    });\n  });\n  return authenticated === null ? null : (\n    <ThemeProvider theme={appTheme}>\n      <CssBaseline>\n        <StyledAppBar position=\"sticky\">\n          <Route path=\"/:subPath?\">\n            {({ match, history }) => (\n              <StyledAppBarTabs\n                value={match.params.subPath || \"\"}\n                onChange={(e, newValue) => history.push(`/${newValue}`)}\n              >\n                <Tab value=\"\" label=\"Home\" />\n                <Tab value=\"fate-core-utils\" label=\"FATE CORE Utils\" />\n                {!!(authenticated && isApiAllowed) && (\n                  <Tab value=\"epic-cafe-manager\" label=\"Epic Cafe Manager\" />\n                )}\n              </StyledAppBarTabs>\n            )}\n          </Route>\n          {authenticated !== null && (\n            <LoginButton\n              isAuthenticated={authenticated}\n              onLogin={() => auth.login(\"/\")}\n              onLogout={() => auth.logout(\"/\")}\n            />\n          )}\n        </StyledAppBar>\n        <Route\n          exact\n          path=\"/\"\n          render={() => (\n            <StyledTopBanner background={homeBannerImage} textColor=\"white\">\n              <Typography gutterBottom variant=\"h3\">\n                Gonzalo Arrivi's Sandbox\n              </Typography>\n              <StyledAvatar src={homeAvatarImage} />\n            </StyledTopBanner>\n          )}\n        />\n        <Container>\n          <Switch>\n            <Route exact path=\"/\" component={Home} />\n            <Route path=\"/fate-core-utils\" component={FateProject} />\n            {!!(authenticated && isApiAllowed) && (\n              <Route path=\"/epic-cafe-manager\" component={EpicCafeManager} />\n            )}\n            <Route\n              render={({ location }) => (\n                <p>404 page not found: {location.pathname}</p>\n              )}\n            />\n          </Switch>\n        </Container>\n      </CssBaseline>\n    </ThemeProvider>\n  );\n});\n\nfunction App() {\n  return (\n    <BrowserRouter basename=\"/gonarrivi-sandbox\">\n      <Security {...config}>\n        <Switch>\n          <Route path=\"/implicit/callback\" component={ImplicitCallback} />\n          <Route component={AppContent}></Route>\n        </Switch>\n      </Security>\n    </BrowserRouter>\n  );\n}\n\nconst rootElement = document.getElementById(\"root\");\nReactDOM.render(<App />, rootElement);\n"],"sourceRoot":""}